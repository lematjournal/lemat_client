<div class="container" ng-init="getIssue()">
   <div class="row">
      <div class="col-md-6">
         <h3>issue name: <input type="text" style="width: 50%;" ng-model="issue.title"></h3>
         <h3>num. of pieces: {{ issue.pieces.length }}</h3>
         <h3>download link: {{ issue.download_link }}</h3>
         <h3>created: {{ ::issue.created_at }}</h3>
         <div class="form-group">
            <input id="upload" type="file" name="pdf" class="upload" style="display: none" file-select folder="'issues/'" accept=".pdf" ng-model="issue.download_link" />
            <button type="button" uploadfile class="btn btn-default btn-block">Select Issue pdf</button>
         </div>
         <div class="form-group">
            <input id="upload" type="file" name="cover" class="upload" style="display: none" file-select folder="'cover/'" accept="image/*" ng-model="image" />
            <button type="button" uploadfile class="btn btn-default btn-block">Select Cover Image</button>
         </div>
      </div>
      <div class="col-md-6">
         <h3>cover image:</h3>
         <img ng-src="{{ issue.image.image_url }}" style="width: 50%; height: 50%">
      </div>
   </div>
   <div class="row" style="margin-top: 15px">
      <table class="table">
         <tr>
            <th>order</th>
            <th>title</th>
            <th>author</th>
            <th>options</th>
         </tr>
         <tr ng-repeat="piece in issue.pieces | orderBy: 'order'">
            <th>{{ piece.order }}</th>
            <th>{{ ::piece.title | cut:true: 25 }}</th>
            <th>by <font ng-repeat="user in piece.users"><span ng-show="!$first && !$last">, </span><span ng-show="$last && !$first"> and </span>{{ ::user.username }}</font>
            </th>
            <th><a class="btn btn-default" href="#!/issue/{{ ::issue.id }}/{{ ::piece.title_url }}/edit">Edit</a> <a class="btn btn-default" href="#!/issue/{{ ::issue.id }}/{{ ::piece.title_url }}">Preview</a> <a class="btn btn-default" ng-click="piece.order = piece.order + 1"><span class="glyphicon glyphicon-chevron-up"></span></a> <a class="btn btn-default" ng-click="piece.order = piece.order - 1"><span class="glyphicon glyphicon-chevron-down"></span></a>
            </th>
         </tr>
      </table>
      <a class="btn btn-default" href="#!/piece-create">Add Piece</a> <a class="btn btn-default" ng-click="updatePieces()">Update Order</a>
      <a class="btn btn-default" ng-click="upsertIssue(issue)">Submit</a>
   </div>
</div>